<div class="container page">
  <div class="page-header">
    <h1 class="section-title">{{ 'doctors.title' | translate }}</h1>
    <a routerLink="/doctors/new" matButton="elevated" color="primary"><mat-icon>person_add</mat-icon>{{ 'doctors.addNew' | translate }}</a>
  </div>

  <div class="search-bar">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>{{ 'doctors.search' | translate }}</mat-label>
      <input matInput (input)="onSearch($event)" />
    </mat-form-field>
    <mat-form-field appearance="outline" class="filter-field">
      <mat-label>{{ 'doctors.filterSpecialization' | translate }}</mat-label>
      <mat-select (selectionChange)="specializationFilter.set($event.value)">
        <mat-option value="">{{ 'doctors.filterSpecialization' | translate }}</mat-option>
        @for (spec of specializations; track spec) {
          <mat-option [value]="spec">{{ 'specialization.' + spec | translate }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  @if (filteredDoctors().length > 0) {
    <table class="data-table data-table-card">
      <thead>
        <tr>
          <th>{{ 'doctors.name' | translate }}</th>
          <th>{{ 'doctors.specialization' | translate }}</th>
          <th>{{ 'doctors.phone' | translate }}</th>
          <th>{{ 'doctors.email' | translate }}</th>
          <th>{{ 'doctors.actions' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        @for (doctor of filteredDoctors(); track doctor.id) {
          <tr>
            <td [attr.data-label]="'doctors.name' | translate"><a [routerLink]="['/doctors', doctor.id]">Dr. {{ doctor.firstName }} {{ doctor.lastName }}</a></td>
            <td [attr.data-label]="'doctors.specialization' | translate"><span class="badge badge-primary">{{ 'specialization.' + doctor.specialization | translate }}</span></td>
            <td [attr.data-label]="'doctors.phone' | translate">{{ doctor.phone }}</td>
            <td [attr.data-label]="'doctors.email' | translate">{{ doctor.email }}</td>
            <td class="td-actions">
              <a [routerLink]="['/doctors', doctor.id]" matButton="outlined"><mat-icon>visibility</mat-icon>{{ 'common.view' | translate }}</a>
              <a [routerLink]="['/doctors', doctor.id, 'edit']" matButton="outlined"><mat-icon>edit</mat-icon>{{ 'common.edit' | translate }}</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <div class="empty-state">
      <p class="empty-state-text">{{ 'doctors.noResults' | translate }}</p>
    </div>
  }
</div>
